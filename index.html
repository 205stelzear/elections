<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta http-equiv="X-UA-Compatible" content="ie=edge">
	<title>Élections Scoutes</title>
	
	<link rel="icon" href="./images/envelope.png">
	
	<link rel="stylesheet" href="./css/libraries/bootstrap.min.css">
	<link rel="stylesheet" href="./css/style.css">
	
	<script src="./js/libraries/jquery-3.3.1.slim.min.js"></script>
	<script src="./js/libraries/popper.min.js"></script>
	<script src="./js/libraries/bootstrap.min.js"></script>
	
	<script src="./js/libraries/FileSaver.min.js"></script>
</head>

<body class="d-flex">
	
	<div id="voting-voted-overlay" class="position-fixed w-100 h-100 d-flex">
		
		<div class="touch-skipper w-100 h-50 fixed-top"></div>
		
		<div class="m-auto text-center">
			<h1 class="display-1">Votes enregistrés!</h1>
		</div>
		
	</div>
	
	<div id="voting-toasts-container" class="fixed-top w-100 d-flex flex-column p-4 i-am-away" style="z-index: 99999;">
		<div class="toast mx-auto" role="alert" data-delay="1500">
			<div class="toast-header">
				<strong class="mr-auto text-primary">Nombre voteur(s) restant</strong>
				<button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
					<span aria-hidden="true">×</span>
				</button>
			</div>
			<div class="toast-body text-center">
				<p id="voters-remaining-count-toast">
					<!-- Text will be set here dynamically -->
				</p>
				<button type="submit" id="voting-skip-button" class="btn btn-primary">Skip votes</button>
			</div>
		</div>
	</div>
	
	<div id="views" class="container py-3">
		
		<div id="home-page" class="text-center h-100">
			
			<div class="d-flex flex-column h-100">
				
				<h1 class="display-1 pt-5">Élections Scoutes</h1>
				
				<div class="flex-grow-1">
					<div class="h-100 d-flex align-items-center justify-content-center">
						<div class="d-flex flex-column w-100">
							
							<button type="button" id="home-new-button" class="btn btn-success btn-lg">Nouvelles Élections</button>
							
							<form id="database-loader-zone" class="loader mt-5 is-popable" method="post" action="" enctype="multipart/form-data" data-placement="bottom">
								<div class="loader-input">
									<input id="loader-file-input" class="loader-file" type="file" name="file" accept=".json" />
									<label for="loader-file-input" class="h-100 w-100 p-5 m-0"><strong>Cliquez dans cette boite pour choisir une base de données (fichier json)</strong><span class="loader-dragndrop"> ou glissez la ici</span>.</label>
								</div>
							</form>
							
						</div>
					</div>
				</div>
				
			</div>
			
		</div>
		
		<div id="setup-page" class="h-100" hidden>
			
			<h2 class="display-2 text-center pt-5 pt-lg-4 pb-3">Préparation élections Scoutes</h2>
			
			<form id="setup-form" class="w-100">
				<div class="form-group row">
					<label class="col-sm-3 col-form-label" for="database-name">Nom de la base de données</label>
					<div class="col-sm-9">
						<input type="text" class="form-control is-invalid is-popable" id="db-name" aria-describedby="dbName" name="dbName" autocomplete="off" spellcheck="false" required>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-sm-3 col-form-label" for="number-of-voters">Nombre de voteurs</label>
					<div class="col-sm-9">
						<input type="number" class="form-control is-invalid is-popable" id="number-of-voters" min="1" aria-describedby="numberOfVoters" name="numberOfVoters" required>
					</div>
				</div>
				<div class="form-group row">
					<label class="col-sm-3 col-form-label" for="number-of-votes">Nombre de votes par voteur</label>
					<div class="col-sm-9">
						<input type="number" class="form-control is-invalid is-popable" id="number-of-votes" min="1" aria-describedby="numberOfVotes" name="numberOfVotes" required>
					</div>
				</div>
				<div id="setup-candidates" class="py-2 py-md-3">
					<div id="candidate-controls-1" class="form-group row">
						<label class="col-sm-2 col-form-label" for="candidate-name-1">Candidat 1</label>
						<div class="col-sm-10">
							<input type="text" class="form-control is-invalid is-popable" id="candidate-name-1" aria-describedby="candidate-1" placeholder="Nom" name="candidate-name-1" data-candidatenumber="1" autocomplete="off" required>
						</div>
					</div>
					<!-- More inputs will dynamically be added here -->
				</div>
				<div class="row mb-4 mx-auto justify-content-center">
					<button id="candidate-add" class="btn btn-secondary" data-candidatecount="1">Ajouter Candidat</button>
					<button id="candidate-remove" class="ml-5 btn btn-danger" hidden>Enlever dernier Candidat</button>
				</div>
				<div class="ml-auto">
					<button type="submit" id="setup-submit-button" class="btn btn-lg btn-block btn-primary" disabled>Soumettre</button>
				</div>
			</form>
			
		</div>
		
		<div id="voting-page" class="h-100" hidden>
			<div class="d-flex flex-column h-100  justify-content-center">
				
				<div id="cards-container" class="w-100 mb-3">
					<!-- Will be filled dynamically with candidates cards -->
				</div>
				
				<div class="w-100">
					<p class="lead text-center">
						Nombre de vote restant : <span id="voting-remaining-count" class="font-weight-bold"></span>
					</p>
					<button type="button" id="voting-submit-button" class="btn btn-success btn-lg btn-block" disabled>Enregistrer mes votes</button>
				</div>
				
			</div>
		</div>
		
		<div id="pre-results-page" class="h-100" hidden>
			
			<div class="d-flex flex-column h-100">
				
				<h2 class="display-2 pt-5 text-center">Résultats Élections Scoutes</h2>
				
				<div class="flex-grow-1">
					<div class="h-100 d-flex align-items-center justify-content-center">
						
						<form id="pre-results-form" class="w-100">
							<div class="form-group px-2 px-md-0">
								<label for="pre-results-password-input">Mot de passe pour afficher les résultats</label>
								<input type="text" class="form-control my-3" id="pre-results-password-input" placeholder="Password" autocomplete="off">
							</div>
							<div class="w-100 text-center mt-4">
								<button type="submit" id="pre-results-submit-button" class="btn btn-primary">Soumettre</button>
							</div>
						</form>
						
					</div>
				</div>
				
			</div>
			
		</div>
		
		<div id="results-page" class="h-100" hidden>
			
			<div class="fixed-top">
				<button type="submit" id="results-homepage-button" class="btn btn-secondary mt-3 mt-lg-5 ml-3 ml-lg-5">Retour à la page d'accueil</button>
			</div>
			
			<div class="d-flex flex-column h-100">
				
				<h2 class="display-2 pt-5 text-center">Résultats Élections Scoutes</h2>
				
				<div class="flex-grow-1">
					<div class="h-100 d-flex align-items-center justify-content-center">
						<table class="table table-striped table-hover table-border">
							<thead class="thead-light">
								<tr>
									<th scope="col" width="5%">#</th>
									<th scope="col" width="5%">Position</th>
									<th scope="col">Candidat</th>
									<th scope="col">Nombre de votes</th>
								</tr>
							</thead>
							<tbody id="results-body">
								<!-- Will be filled dynamically with candidates voting results -->
							</tbody>
						</table>
					</div>
				</div>
				
				<button type="submit" id="results-download-button" class="btn btn-lg btn-success">Télécharger la base de données</button>
				
			</div>
			
		</div>
		
	</div>
	
	<script src="./js/utilities.js"></script>
	<script src="./js/switcher.js"></script>
	<script src="./js/index.js"></script>
	<script src="./js/results.js"></script>
	<script src="./js/voting.js"></script>
	<script src="./js/setup.js"></script>
	
</body>

</html>